---
import { Moon, Sun } from "lucide-react"
---

<div id="toggle-dark-mode" class="flex items-center justify-center gap-2">
    <button id="dark-mode-button" class="dark:hidden p-2 rounded-md hover:bg-accent hover:text-accent-foreground">
        <Moon className="w-5 h-5" />
    </button>

    <button id="light-mode-button" class="hidden dark:block p-2 rounded-md hover:bg-accent hover:text-accent-foreground">
        <Sun className="w-5 h-5" />
    </button>
</div>

<script>
    // Initialize theme from localStorage or default to light
    const initializeTheme = () => {
        const savedTheme = localStorage.getItem('theme')
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    }
    
    // Run immediately to prevent flash
    initializeTheme()
    
    // Add click handler
    const toggleDarkMode = document.getElementById("toggle-dark-mode")
    toggleDarkMode?.addEventListener("click", () => {
        const isDark = document.documentElement.classList.contains("dark")
        
        if (isDark) {
            document.documentElement.classList.remove("dark")
            localStorage.setItem('theme', 'light')
        } else {
            document.documentElement.classList.add("dark")
            localStorage.setItem('theme', 'dark')
        }
    })
</script>