---
const {currentLocale} =    Astro.props
import PlatformsSection1Image from "@/assets/platforms-section-1.png"
import Button from "@/components/starwind/button"
import i18nContent from "@/i18n/content.json"

const i18n = i18nContent[currentLocale as keyof typeof i18nContent]
const localesContent = {
    "en":{
        title: "Platform Services",
        description: "Sixth Sense Pay was designed to integrate seamlessly into any type of digital platform. Our regulated payment infrastructure allows you to offer your users a smooth and reliable experience.",
    },
    "es":{
        title: "Servico para plataformas",
        description: "Sixth Sense Pay fue diseñado para integrarsede manera ágil y segura en todo tipo de plataformas digitales. Nuestra infraestructura de pagos regulada te permite ofrecer a tus usuarios una experiencia fluida y confiable.",
    }
}

const content = localesContent[currentLocale as keyof typeof localesContent]
---

<section id="platforms-section-1" class="mx-auto px-4 py-6 lg:py-12 w-full h-full bg-secondary pb-20 pt-12">
    <div class="flex flex-col lg:flex-row gap-2 items-center justify-center w-full max-w-[1440px] mx-auto">
        <div class="flex flex-col gap-8 lg:gap-0 items-start justify-start" data-block-text style="opacity: 0;">
            <h1 class="text-4xl lg:text-5xl font-bold" set:html={content.title}></h1>
            <div class="flex overflow-hidden w-full h-auto">
            <img src={PlatformsSection1Image.src} alt="Sixth Sense Pay" class="block scale-115 lg:hidden w-full h-auto" />
            </div>
            <p set:html={content.description} class="text-base lg:text-lg font-light lg:mt-6 text-muted-foreground"></p>
            <!-- <Button href={i18n.navigation.contact.url} variant="primary" size="lg" class="text-xl w-full lg:w-auto py-8 lg:mt-8 lg:px-12">{content.button}</Button>     -->
        </div>

        <img src={PlatformsSection1Image.src} alt="Sixth Sense Pay" class="hidden lg:block lg:w-1/2 lg:h-1/2" data-block-image style="opacity: 0;" />
    </div>
    </div>
</section>

<script>
    import { inView } from 'motion'

    // Animate text container first
    const textElement = document.querySelector('[data-block-text]')
    if (textElement) {
        inView(textElement, () => {
            textElement.animate(
                [
                    { opacity: 0, transform: 'translateY(40px)' },
                    { opacity: 1, transform: 'translateY(0)' }
                ],
                {
                    duration: 600,
                    easing: 'ease-out',
                    fill: 'forwards'
                }
            )
        }, { amount: 0.3 })
    }

    // Animate image with delay (desktop only)
    const imageElement = document.querySelector('[data-block-image]')
    if (imageElement) {
        inView(imageElement, () => {
            setTimeout(() => {
                imageElement.animate(
                    [
                        { opacity: 0, transform: 'translateY(40px)' },
                        { opacity: 1, transform: 'translateY(0)' }
                    ],
                    {
                        duration: 600,
                        easing: 'ease-out',
                        fill: 'forwards'
                    }
                )
            }, 200)
        }, { amount: 0.3 })
    }
</script>
